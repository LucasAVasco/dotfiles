#!/bin/bash
#
# Creates/deletes a backup commit with all unstaged changes.

set -e

source ~/.config/bash/libs/help.sh

help_handle y "$@" << EOF
	Creates/deletes a backup commit with all unstaged changes

	USAGE
		git bkp
			Creates a backup commit with all unstaged changes

		git bkp -u
			Deletes the last backup commit
EOF


if [[ "$1" == '' ]]; then
	make -C ~/.local/custom_scripts WORKING_DIR="$PWD" SCRIPT='git/backup.sh'
elif [[ "$1" == '-u' ]]; then
	make -C ~/.local/custom_scripts WORKING_DIR="$PWD" SCRIPT='git/delete_backup.sh'
else
	echo "Unknown argument: $1" >&2
fi
