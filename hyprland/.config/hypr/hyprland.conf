# Documentation available at https://wiki.hypr.land/Configuring/
#
# Default configuration file at: https://github.com/hyprwm/Hyprland/blob/main/example/hyprland.conf

# Source other configurations {{{

source = ~/.config/hypr/defaults.conf
source = ~/.config/hypr/permissions.conf

# }}}

# Initialization scripts {{{

exec-once = ~/.config/hypr/init.sh
exec-once = hyprpaper
exec-once = ~/.config/hypr/gammastep.sh # Screen temperature filter

# }}}

# Environment variables {{{

env = CUSTOM_DESKTOP_SET_WALLPAPAER_COMMAND,~/.config/hypr/update-wallpaper.sh
env = CUSTOM_DESKTOP_LOGOUT_COMMAND,hyprctl dispatch exit
env = XCURSOR_SIZE,24
env = HYPRCURSOR_SIZE,24

# }}}

# Devices {{{

monitor=,preferred,auto,auto

input {
    kb_layout = $XKB_DEFAULT_LAYOUT

    touchpad {
        natural_scroll = true
    }
}

misc {
    force_default_wallpaper = 0
    disable_hyprland_logo = true
}

# Gestures {{{

gesture = 3, horizontal, workspace

# }}}

# }}}

# Appearance {{{

general {
    gaps_in = 7
    gaps_out = 15
    border_size = 3

    col.active_border = rgba(255,102,51,1.0)
    col.inactive_border = rgba(119,119,119,1.0)
}

cursor {
    inactive_timeout = 2 # Hide inactive cursor after timeout (seconds)
}

# Disables border if there is only one window
windowrulev2 = noborder, onworkspace:w[t1]

# }}}

# Key binds {{{

# Applications {{{

bind = SUPER, RETURN, exec, default_term
bind = SUPER, f, exec, default_file_manager
bind = SUPER, w, exec, ~/.local/dotfiles_bin/default_web_browser
bind = SUPER, t, exec, ~/.config/custom-desktop/chdesk-ui.sh
bind = SUPER, a, exec, ~/.config/custom-desktop/launcher.sh
bind = SUPER, o, exec, ~/.config/custom-desktop/org-menu.sh
bind = SUPER, r, exec, ~/.local/dotfiles_bin/custom-script-popup
bind = SUPER SHIFT, p, exec, ~/.config/custom-desktop/password-manager.sh
bind = SUPER, s, exec, ~/.config/screenshot/take.sh -c
bind = SUPER SHIFT, s, exec, ~/.config/screenshot/take.sh -i -c
bind = SUPER SHIFT, ESCAPE, exec, ~/.config/custom-desktop/session-manager.sh

# }}}

bind = SUPER, c, killactive,
bind = SUPER CTRL SHIFT, q, exit,
bind = SUPER SHIFT, x, exec, hyprctl reload

# Focus to direction
bind = SUPER, H, movefocus, l
bind = SUPER, J, movefocus, d
bind = SUPER, K, movefocus, u
bind = SUPER, L, movefocus, r

# Move window to direction
bind = SUPER ALT, H, movewindow, l
bind = SUPER ALT, J, movewindow, d
bind = SUPER ALT, K, movewindow, u
bind = SUPER ALT, L, movewindow, r

# Resizes in direction
bind = SUPER SHIFT, H, resizeactive, -20 0
bind = SUPER SHIFT, L, resizeactive, 20 0
bind = SUPER SHIFT, J, resizeactive, 0 20
bind = SUPER SHIFT, K, resizeactive, 0 -20

# Move to work space
bind = SUPER, 1, workspace, 1
bind = SUPER, 2, workspace, 2
bind = SUPER, 3, workspace, 3
bind = SUPER, 4, workspace, 4
bind = SUPER, 5, workspace, 5
bind = SUPER, F1, workspace, 6
bind = SUPER, F2, workspace, 7
bind = SUPER, F3, workspace, 8
bind = SUPER, F4, workspace, 9
bind = SUPER, F5, workspace, 10
bind = SUPER, BracketLeft, workspace, -1
bind = SUPER, BracketRight, workspace, +1
bind = SUPER, Backspace, workspace, previous
bind = SUPER, Tab, togglespecialworkspace, magic

# Move window to work space
bind = SUPER ALT, 1, movetoworkspace, 1
bind = SUPER ALT, 2, movetoworkspace, 2
bind = SUPER ALT, 3, movetoworkspace, 3
bind = SUPER ALT, 4, movetoworkspace, 4
bind = SUPER ALT, 5, movetoworkspace, 5
bind = SUPER ALT, F1, movetoworkspace, 6
bind = SUPER ALT, F2, movetoworkspace, 7
bind = SUPER ALT, F3, movetoworkspace, 8
bind = SUPER ALT, F4, movetoworkspace, 9
bind = SUPER ALT, F5, movetoworkspace, 10
bind = SUPER ALT, BracketLeft, movetoworkspace, -1
bind = SUPER ALT, BracketRight, movetoworkspace, +1
bind = SUPER ALT, Backspace, movetoworkspace, previous
bind = SUPER ALT, Tab, movetoworkspace, special:magic

# Move window to work space but continue in the current
bind = SUPER SHIFT, 1, movetoworkspacesilent, 1
bind = SUPER SHIFT, 2, movetoworkspacesilent, 2
bind = SUPER SHIFT, 3, movetoworkspacesilent, 3
bind = SUPER SHIFT, 4, movetoworkspacesilent, 4
bind = SUPER SHIFT, 5, movetoworkspacesilent, 5
bind = SUPER SHIFT, F1, movetoworkspacesilent, 6
bind = SUPER SHIFT, F2, movetoworkspacesilent, 7
bind = SUPER SHIFT, F3, movetoworkspacesilent, 8
bind = SUPER SHIFT, F4, movetoworkspacesilent, 9
bind = SUPER SHIFT, F5, movetoworkspacesilent, 10
bind = SUPER SHIFT, BracketLeft, movetoworkspacesilent, -1
bind = SUPER SHIFT, BracketRight, movetoworkspacesilent, +1
bind = SUPER SHIFT, Backspace, movetoworkspacesilent, previous
bind = SUPER SHIFT, Tab, movetoworkspacesilent, special:magic

# Node management {{{

bind = SUPER, 0, togglefloating
bind = SUPER, 8, fullscreen, 0
bind = SUPER, 9, exec, hyprctl dispatch setfloating ; hyprctl dispatch pin
bind = SUPER, 7, pseudo,
bind = SUPER, 6, togglesplit,

# Layout
bind = SUPER, m, layoutmsg, cyclenext
bind = SUPER SHIFT, m, layoutmsg, swapwithmaster master

# }}}

# Notifications {{{

# bind = SUPER, n, exec, # TODO(LucasAVasco): menu to show all notifications actions and select one to execute
bind = SUPER SHIFT, n, exec, ~/.config/custom-desktop/dismiss-notifications.sh

# }}}

# System management {{{

bind = SUPER, y, exec, ~/.local/dotfiles_bin/receive-clip-from-sync-folder
bind = SUPER, p, exec, ~/.local/dotfiles_bin/send-clip-to-sync-folder
bind = SUPER SHIFT, y, exec, ~/.config/clipboard/clear.sh
bind = SUPER, Delete, exec, hyprctl kill
bind = SUPER, z, exec, ~/.config/screenlocker/manager.sh toggle
bind = CTRL ALT, l, exec, ~/.config/screenlocker/manager.sh run

# }}}

# Back light {{{

bind = SUPER, F6, exec, ~/.config/monitor/set_backlight.lua -5%
bind = SUPER, F8, exec, ~/.config/monitor/set_backlight.lua +5%
bind = SUPER, F7, exec, ~/.config/monitor/set_backlight.lua 15%

# }}}

# Sound and volume {{{

bind = SUPER, F9, exec, pactl set-sink-mute @DEFAULT_SINK@ toggle
bind = SUPER, F10, exec, pactl set-sink-volume @DEFAULT_SINK@ -5%
bind = SUPER, F11, exec, pactl set-sink-volume @DEFAULT_SINK@ +5%
bind = SUPER, b, exec, ~/.config/keyboard/sound_emulator.sh toggle

# }}}

# Mouse settings {{{

# Move window with SUPER + left click
bindm = SUPER, mouse:272, movewindow

# Resize window with SUPER + right click
bindm = SUPER, mouse:273, resizewindow

# }}}

# }}}

# Arch wiki recommendation to enable screen cast (https://wiki.archlinux.org/title/XDG_Desktop_Portal).
# For further information: https://gist.github.com/brunoanc/2dea6ddf6974ba4e5d26c3139ffb7580
# exec-once=systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
# exec-once=dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
# NOTE(LucasAVasco): My configuration works well without these configurations, but you may need to enable them.
